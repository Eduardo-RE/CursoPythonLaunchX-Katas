System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-overview.js","./chunk-get-repo-element.js","./chunk-input-demux.js","./chunk-ref-selector.js","./chunk-spoofed-commit-warning.js"],function(){"use strict";var w,ke,_e,N,Le,j,h,l,Q,Ce,Ae,Ie,Te,$,J,Pe,xe,U,Ee,De,Oe,Me,Re,Ne,$e,Ue,Be;return{setters:[function(u){w=u.t,ke=u.b,_e=u.d,N=u.c,Le=u.h,j=u.f,h=u.o,l=u.a,Q=u.r,Ce=u.C,Ae=u.e,Ie=u.af,Te=u.j},function(u){$=u.e,J=u.q,Pe=u.c,xe=u.r,U=u.A,Ee=u.z,De=u.P,Oe=u.aE,Me=u.aG,Re=u.m,Ne=u.aF,$e=u.y,Ue=u.aT},function(){},function(u){Be=u.G},function(){},function(){},function(){}],execute:function(){var u=Object.defineProperty,Ct=Object.getOwnPropertyDescriptor,Fe=(e,t)=>u(e,"name",{value:t,configurable:!0}),k=(e,t,r,n)=>{for(var s=n>1?void 0:n?Ct(t,r):t,o=e.length-1,a;o>=0;o--)(a=e[o])&&(s=(n?a(t,r,s):a(s))||s);return n&&s&&u(t,r,s),s};let S=class extends HTMLElement{constructor(){super(...arguments);this.abortSearch=null,this.originalSelectedItem=null}submit(e){e.preventDefault()}resetField(e){if(Le(e)!=="Escape")return;const t=this.field.value.trim();this.field.value="",t&&this.search()}reset(){this.field.focus(),this.field.value="",j(this.field,"input")}get activeFilter(){var e;return(e=this.filters.find(t=>t.classList.contains("selected")))!=null?e:null}async search(){var e;this.originalSelectedItem||(this.originalSelectedItem=this.activeFilter);const t=this.field.value.trim().length>0,r=He(this.field);this.classList.toggle("is-search-mode",t),this.classList.add("is-loading");for(const s of this.filters)s.classList.remove("selected");t?this.allFilter.classList.add("selected"):this.originalSelectedItem&&(this.originalSelectedItem.classList.add("selected"),this.originalSelectedItem=null),(e=this.abortSearch)==null||e.abort();const{signal:n}=this.abortSearch=new AbortController;try{const s=await $(document,r,{signal:n});J(null,"",r),this.result.innerHTML="",this.result.appendChild(s)}catch{}n.aborted||this.classList.remove("is-loading")}};Fe(S,"BranchFilterElement"),k([w],S.prototype,"field",2),k([w],S.prototype,"result",2),k([w],S.prototype,"allFilter",2),k([ke],S.prototype,"filters",2),k([_e(100)],S.prototype,"search",1),S=k([N],S);function He(e){const t=e.form;if(e.value.trim()){const r=new URL(t.action,window.location.origin),n=new URLSearchParams(r.search.slice(1)),s=t.elements.namedItem("utf8");return s instanceof HTMLInputElement&&n.append("utf8",s.value),n.append("query",e.value),r.search=n.toString(),r.toString()}return t.getAttribute("data-reset-url")}Fe(He,"queryUrl");var We=Object.defineProperty,At=Object.getOwnPropertyDescriptor,It=(e,t)=>We(e,"name",{value:t,configurable:!0}),Y=(e,t,r,n)=>{for(var s=n>1?void 0:n?At(t,r):t,o=e.length-1,a;o>=0;o--)(a=e[o])&&(s=(n?a(t,r,s):a(s))||s);return n&&s&&We(t,r,s),s};let x=class extends HTMLElement{get branch(){return this.getAttribute("branch")}get branches(){const t=this.closest("branch-filter").querySelectorAll("branch-filter-item");return Array.from(t).filter(r=>r.branch===this.branch)}loading(e){for(const t of this.branches)t.spinner.hidden=!e,t.destroyButton&&(t.destroyButton.hidden=e)}set mode(e){for(const t of this.branches)t.classList.toggle("Details--on",e==="restore")}async restore(e){e.preventDefault(),this.loading(!0);const t=e.target;let r;try{r=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch{}finally{(!r||!r.ok)&&location.reload(),this.loading(!1)}this.mode="destroy"}async destroy(e){e.preventDefault(),this.loading(!0);const t=e.target;let r;try{r=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}})}catch{}finally{(!r||!r.ok)&&location.reload(),this.loading(!1)}this.mode="restore"}};It(x,"BranchFilterItemElement"),Y([w],x.prototype,"destroyButton",2),Y([w],x.prototype,"spinner",2),x=Y([N],x),h(".js-new-badge-autodismiss",{constructor:HTMLFormElement,add:e=>{const t=e.closest("details");t.addEventListener("toggle",()=>{t.hasAttribute("open")&&fetch(e.action,{method:e.method,body:new FormData(e),headers:{"X-Requested-With":"XMLHttpRequest"}})})}}),h(".js-fetch-upstream-details-content",{constructor:HTMLElement,initialize(e){e.hidden=!0}}),l("click",".js-fetch-upstream-summary",async function(){const e=document.querySelector("details.js-fetch-upstream-details"),t=e.querySelector(".js-fetch-upstream-details-spinner");if(e.open){t.hidden=!1;return}if(t.hidden)return;const r=e.querySelector(".js-fetch-upstream-details-content"),n=r.querySelector(".js-fetch-upstream-conflicts-ui"),s=r.querySelector(".js-fetch-upstream-no-conflicts-ui"),o=r.querySelector(".js-fetch-upstream-conflicts-error-message"),a=r.querySelector(".js-fetch-upstream-conflicts-no-error-message");if(parseInt(r.getAttribute("data-behind"))===0){n.hidden=!0,s.hidden=!1,r.hidden=!1,t.hidden=!0;return}const c=r.getAttribute("data-mergeability-check-url"),d=await fetch(c,{headers:{Accept:"application/json"}});r.hidden=!1,t.hidden=!0,d.ok?(await d.json()).state==="clean"?s.hidden=!1:n.hidden=!1:(n.hidden=!1,o.hidden=!1,a.hidden=!0)}),h(".repository-import",{subscribe:e=>Pe(e,"socket:message",function(t){const r=t.detail.data;r.redirect_to&&(document.location.href=r.redirect_to,t.stopImmediatePropagation())})}),l("change","input.js-repository-import-lfs-opt",function({currentTarget:e}){const t=parseInt(e.getAttribute("data-percent-used")||""),r=e.closest(".js-repository-import-lfs-container"),n=e.getAttribute("data-used")||"";r.querySelector(".js-repository-import-lfs-warn").classList.toggle("d-none",!(t>100)),r.querySelector(".js-usage-bar").classList.toggle("exceeded",t>=100),r.querySelector(".js-usage-bar").setAttribute("aria-label",`${t}%`),r.querySelector(".js-repository-import-lfs-progress").style.width=`${t}%`,r.querySelector("span.js-usage-text").textContent=n}),Q(".js-repository-import-author-form",async function(e,t){const r=await t.html();e.closest(".js-repository-import-author").replaceWith(r.html)}),l("click",".js-repository-import-projects-cancel-button",function(){const e=document.querySelector(".js-repository-import-projects-cancel-form");xe(e)});var Tt=Object.defineProperty,g=(e,t)=>Tt(e,"name",{value:t,configurable:!0});let ze=!1;function Ge(){return document.querySelector(".js-privacy-toggle:checked").value==="private"}g(Ge,"privateRepoSelected");function Z(){const e=document.querySelector(".js-repo-name");j(e,"input");const t=document.querySelector('.js-owner-container [aria-checked="true"]'),r=t.getAttribute("data-org-allow-public-repos")!=="false",n=document.querySelector(".js-privacy-toggle[value=public]"),s=document.querySelector(".js-privacy-toggle-label-public"),o=document.querySelector(".js-public-description"),a=document.querySelector(".js-public-restricted-by-policy-description");ee(r,n,s,o,a);const i=t.getAttribute("data-business-id"),c=Ke(i,t),d=t.getAttribute("data-org-allow-private-repos")!=="false",f=document.querySelector(".js-privacy-toggle[value=private]"),p=document.querySelector(".js-privacy-toggle-label-private"),A=document.querySelector(".js-private-description"),b=document.querySelector(".js-private-restricted-by-policy-description");ee(d,f,p,A,b),Xe();const jt=t.getAttribute("data-org-private-restricted-by-plan")!=="false",I=document.querySelector(".js-upgrade-private-description"),St=t.getAttribute("data-org-show-upgrade")!=="false",bt=t.getAttribute("data-org-name"),T=bt?document.querySelector(`a[data-upgrade-link="${bt}"]`):null,P=document.querySelector(".js-ask-owner-message");d||!jt?(I&&(I.hidden=!0),T&&(T.hidden=!0),P&&(P.hidden=!0)):(b&&(b.hidden=jt),I&&(I.hidden=!1),T&&(T.hidden=!St),P&&(P.hidden=St));const Gt=t.getAttribute("data-default-new-repo-branch"),vt=document.querySelector(".js-new-repo-owner-default-branch");vt&&(vt.textContent=Gt);const Xt=t.getAttribute("data-owner-settings-link-prefix"),qt=document.querySelector(".js-new-repo-owner-settings-link-prefix");qt&&(qt.textContent=Xt);const wt=t.getAttribute("data-owner-settings-url"),X=document.querySelector(".js-repo-owner-default-branch-settings-link-container"),V=document.querySelector(".js-org-repo-owner-default-branch-settings-info");if(wt){const v=document.querySelector(".js-new-repo-owner-settings-link");v&&(v.href=wt,X&&(X.hidden=!1)),V&&(V.hidden=!0)}else if(X&&(X.hidden=!0,V)){const v=t.hasAttribute("data-viewer-is-org-admin");V.hidden=!v}const Vt=t.getAttribute("data-org-show-trade-controls")==="true",kt=t.getAttribute("data-viewer-is-org-admin")==="true",be=t.getAttribute("data-user-show-trade-controls")==="true",ve=Vt&&!d,q=document.querySelector(".js-trade-controls-description"),K=document.querySelector(".js-individual-trade-controls-description");be||ve?(b&&(!be&&!kt&&ve?b.hidden=!1:b.hidden=!0),f.disabled=!0,A&&(A.hidden=!0),I&&(I.hidden=!0),T&&(T.hidden=!0),P&&(P.hidden=!0)):(q&&(q.hidden=!0),K&&(K.hidden=!0)),be?(q&&(q.hidden=!0),K&&(K.hidden=!1)):ve&&q&&(kt?q.hidden=!1:q.hidden=!0),Ve(t,n,c,f),Qe(t.getAttribute("data-permission")==="yes"),Je(),te();const qe=document.querySelector(".js-quick-install-container");if(qe){const v=qe.querySelector(".js-quick-install-divider");v.hidden=!0;const _t=document.querySelector("input[name=owner]:checked").parentElement;if(_t){const we=_t.querySelector(".js-quick-install-list-template");if(we instanceof HTMLTemplateElement){const Lt=qe.querySelector(".js-account-apps");Lt.innerHTML="",Lt.append(we.content.cloneNode(!0)),we.children.length>0&&(v.hidden=!1)}}}}g(Z,"handleOwnerChange");function ee(e,t,r,n,s){e?(t&&(t.disabled=!1),r&&r.classList.remove("color-fg-muted"),n&&(n.hidden=!1),s&&(s.hidden=!0)):(t&&(t.disabled=!0),r&&r.classList.add("color-fg-muted"),n&&(n.hidden=!0),s&&(s.hidden=!1))}g(ee,"enableDisableRepoType");function Xe(){const e=document.querySelectorAll('.js-org-upgrade-link:not([hidden=""]');for(const t of e)t.hidden=!0}g(Xe,"hideOrgUpgradeLinks");function Ve(e,t,r,n){let s=null;if(e.getAttribute("data-default")==="private"&&!n.disabled?s=n:e.getAttribute("data-default")==="internal"&&r&&!r.disabled?s=r:t&&!t.disabled?s=t:r&&!r.disabled&&(s=r),!s)return;const o=t&&t.disabled&&t.checked||n.disabled&&n.checked||r&&r.disabled&&r.checked,a=(!t||!t.checked)&&(!r||!r.checked)&&!n.checked;(ze===!1||o===!0||a===!0)&&(s.checked=!0,j(s,"change"))}g(Ve,"ensureOneRadioIsSelected");function Ke(e,t){let r=!1;const n=document.querySelectorAll(".js-new-repo-internal-visibility");for(const s of n){s.hidden=!0;const o=s.querySelector(".js-privacy-toggle[value=internal]");o instanceof HTMLInputElement&&o.checked&&(r=!0)}if(e){const s=document.querySelector(`#new-repo-internal-visibility-${e}`);if(s){s.hidden=!1;const o=s.querySelector(".js-privacy-toggle-label-internal"),a=s.querySelector(".js-internal-description"),i=s.querySelector(".js-internal-restricted-by-policy-description"),c=s.querySelector(".js-privacy-toggle[value=internal]");if(c instanceof HTMLInputElement)return t.getAttribute("data-org-allow-internal-repos")==="false"?(c.disabled=!0,o&&o.classList.add("color-fg-muted"),a&&(a.hidden=!0),i&&(i.hidden=!1)):(r&&(c.checked=!0,j(c,"change")),c.disabled=!1,o&&o.classList.remove("color-fg-muted"),a&&(a.hidden=!1),i&&(i.hidden=!0)),c}}return null}g(Ke,"updateInternalDiv");function Qe(e){for(const n of document.querySelectorAll(".js-with-permission-fields"))n.hidden=!e;for(const n of document.querySelectorAll(".js-without-permission-fields"))n.hidden=e;const t=document.querySelector(".errored"),r=document.querySelector("dl.warn");t&&(t.hidden=!e),r&&(r.hidden=!e)}g(Qe,"togglePermissionFields");function te(e){const t=document.querySelector("#js-upgrade-container");if(!t)return;const r=t.querySelector(".js-billing-section"),n=t.querySelector(".js-confirm-upgrade-checkbox");let s=e?e.target:null;s||(s=document.querySelector(".js-privacy-toggle:checked")),s.value==="false"?(t.hidden=!1,r&&r.classList.remove("has-removed-contents"),n&&(n.checked=!0)):(t.hidden=!0,r&&r.classList.add("has-removed-contents"),n&&(n.checked=!1)),y()}g(te,"handlePrivacyChange");function Je(){const e=document.querySelector("#js-upgrade-container");if(!e)return;const t=document.querySelector("#js-payment-methods-form");e.firstElementChild&&t.appendChild(e.firstElementChild);const r=document.querySelector("input[name=owner]:checked").value,n=t.querySelector(`.js-upgrade[data-login="${r}"]`);n&&e.appendChild(n)}g(Je,"updateUpsell");function y(){const e=document.querySelector(".js-repo-form"),t=e.querySelector(".js-repository-owner-choice:checked"),r=e.querySelector(".js-repo-name"),n=e.querySelector(".js-repo-url"),s=e.querySelector(".js-repo-gitignore"),o=e.querySelector(".js-repo-license");let a=n?!n.classList.contains("is-autocheck-errored"):!0;if(a=a&&!!t,a&&r&&(a=r.classList.contains("is-autocheck-successful"),Ge()&&(a=a&&Ye())),s&&s.checked){const c=e.querySelector('input[name="repository[gitignore_template]"]:checked');a=a&&c.value!==""}if(o&&o.checked){const c=e.querySelector('input[name="repository[license_template]"]:checked');a=a&&c.value!==""}const i=e.querySelector("button[type=submit]");i.disabled=!a}g(y,"validate");function Ye(){const e=document.querySelector("#js-upgrade-container");if(!e)return!0;if(e.querySelector(".js-ofac-sanction-notice"))return!1;const r=e.querySelector(".js-confirm-upgrade-checkbox");if(r instanceof HTMLInputElement&&!r.checked)return!1;const n=e.querySelector(".js-zuora-billing-info");return!(n&&n.classList.contains("d-none"))}g(Ye,"validBillingInfo");function Ze(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const r=t.querySelector(".js-repo-init-setting-unchecked-menu-option");r.checked||(r.checked=!0,j(r,"change"))}g(Ze,"onRepoInitSettingUnchecked");function et(e){const t=e.closest(".js-repo-init-setting-container");if(!t)return;const r=t.querySelector(".js-toggle-repo-init-setting");r.checked&&(r.checked=!1,j(r,"change"))}g(et,"onRepoInitNoneMenuOptionSelected");function tt(e){const t=e.closest("form"),r=t.querySelector(".js-new-repo-default-branch-info");if(!r)return;const s=t.querySelectorAll(".js-toggle-new-repo-default-branch-info:checked").length>0;r.hidden=!s}g(tt,"toggleDefaultBranchInfo"),h("#js-upgrade-container .js-zuora-billing-info:not(.d-none)",y),h(".js-page-new-repo",function(){const e=document.querySelector("#js-upgrade-container");e&&(e.hidden=!0),Z();const t=document.querySelector(".js-repo-form"),r=t.querySelector(".js-repo-url");if(r){r.focus();return}const n=t.querySelector(".js-template-repository-select");if(n){n.focus();return}const s=t.querySelector(".js-owner-select");s&&s.focus()}),l("click",".js-reponame-suggestion",function(e){const t=document.querySelector(".js-repo-name");t.value=e.currentTarget.textContent,j(t,"input",!1)}),l("click",".js-privacy-toggle",function(){ze=!0}),l("change",".js-privacy-toggle",te),l("details-menu-selected",".js-owner-container",Z,{capture:!0}),l("change","#js-upgrade-container input",y),U("#js-upgrade-container input",y);const Pt=g(e=>{const t=document.querySelector(".js-org-profile");if(t){const r=document.querySelector(".js-owner-container input.js-repository-owner-is-org:checked"),n=e.target,s=!(r&&n.value.toLowerCase()===".github");t.hidden=s;const o=document.querySelector("#repo-name-suggestion");o.hidden=!s}},"renderOrgProfileHint"),xt=g(e=>{const t=document.querySelector(".js-personal");if(t){const r=document.querySelector(".js-owner-container input.js-repository-owner-is-viewer"),n=e.target,s=!(r&&r.checked&&r.defaultValue.toLowerCase()===n.value.toLowerCase());t.hidden=s;const o=document.querySelector("#repo-name-suggestion");o.hidden=!s}},"renderPersonalProfileHint");U(".js-owner-reponame .js-repo-name",function(e){xt(e),Pt(e),y()}),l("auto-check-send",".js-repo-name-auto-check",function(e){const n=e.currentTarget.form.querySelector("input[name=owner]:checked").value;e.detail.body.append("owner",n)}),l("auto-check-complete","#repository_name",function(){y()}),U(".js-repo-url",function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const r=t.closest(".form-group");if(!(r instanceof HTMLDListElement))return;const n=document.querySelector(".js-insecure-url-warning"),s=document.querySelector(".js-svn-url-error"),o=document.querySelector(".js-git-url-error"),a=t.value.toLowerCase();n.hidden=!a.startsWith("http://"),s.hidden=!a.startsWith("svn://"),o.hidden=!a.startsWith("git://"),a.startsWith("svn://")||a.startsWith("git://")?(t.classList.add("is-autocheck-errored"),r.classList.add("errored")):(t.classList.remove("is-autocheck-errored"),r.classList.remove("errored")),y()}),l("change",".js-toggle-repo-init-setting",e=>{const t=e.currentTarget;t.checked||Ze(t),y()}),l("change",".js-repo-init-setting-unchecked-menu-option",e=>{const t=e.currentTarget;t.checked&&et(t),y()}),l("change",".js-repo-init-setting-menu-option",y),l("change",".js-repo-readme",y),l("change",".js-toggle-new-repo-default-branch-info",e=>{const t=e.currentTarget;tt(t)});var Et=Object.defineProperty,re=(e,t)=>Et(e,"name",{value:t,configurable:!0});h(".js-pulse-contribution-data",e=>{nt(e)});async function rt(e){return $(document,e)}re(rt,"diffstatCall");async function nt(e){const t=e.getAttribute("data-pulse-diffstat-summary-url");let r;try{t&&(r=await rt(t),st(r,e))}catch{const s=e.querySelector(".js-blankslate-loading"),o=e.querySelector(".js-blankslate-error");s.classList.add("d-none"),o.classList.remove("d-none")}}re(nt,"loadContributionData");function st(e,t){t.innerHTML="",t.appendChild(e)}re(st,"showContributionData");var Dt=Object.defineProperty,m=(e,t)=>Dt(e,"name",{value:t,configurable:!0});async function ne(e){const t=e.form,r=t.querySelector("#release_draft");r.value="1",E(e,"saving");const n=await fetch(t.action,{method:t.method,body:new FormData(t),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!n.ok){E(e,"failed");return}const s=await n.json();return E(e,"saved"),setTimeout(E,5e3,e,"default"),j(t,"release:saved",{release:s}),s}m(ne,"saveDraft"),l("change",".js-releases-marketplace-publish-field",function(e){se(e.currentTarget)}),h(".js-releases-marketplace-publish-field",function(e){se(e)});function se(e){const r=e.closest(".js-releases-marketplace-publish-container").querySelector(".js-releases-marketplace-publish-preview");e.checked?r.classList.remove("d-none"):r.classList.add("d-none")}m(se,"processMarketplacePublishCheckbox"),l("click",".js-save-draft",function(e){const t=e.currentTarget;ne(t),e.preventDefault()});function E(e,t){for(const r of e.querySelectorAll(".js-save-draft-button-state"))r.hidden=r.getAttribute("data-state")!==t;e.disabled=t==="saving"}m(E,"setState"),l("release:saved",".js-release-form",function(e){const t=e.detail.release,r=e.currentTarget;if(r.setAttribute("action",t.update_url),t.update_authenticity_token){const s=r.querySelector("input[name=authenticity_token]");s.value=t.update_authenticity_token}J(Ee(),document.title,t.edit_url);const n=r.querySelector("#release_id");if(!n.value){n.value=t.id;const s=document.createElement("input");s.type="hidden",s.name="_method",s.value="put",r.appendChild(s)}}),l("click",".js-publish-release",function(){document.querySelector("#release_draft").value="0"});function _(e){const t=document.querySelector(".js-release-target-wrapper");if(t!=null){switch(ot(e),e){case"valid":case"invalid":case"duplicate":t.hidden=!0;break;case"loading":break;default:t.hidden=!1}for(const r of document.querySelectorAll(".js-tag-status-message"))r.hidden=r.getAttribute("data-state")!==e;H(),L("pending")}}m(_,"setTagWrapperState");function oe(){return document.querySelector(".js-release-tag").getAttribute("data-state")}m(oe,"getTagState");function ot(e){document.querySelector(".js-release-tag").setAttribute("data-state",e)}m(ot,"setTagState");const at=new WeakMap;function B(e){const t=e.querySelector('input[name="release[tag_name]"]:checked');return t==null?void 0:t.value}m(B,"getTagName");async function ae(e){const t=B(e);if(!t){_("empty");return}if(t===at.get(e))return;_("loading"),at.set(e,t);const r=e.getAttribute("data-url"),n=new URL(r,window.location.origin),s=new URLSearchParams(n.search.slice(1));s.append("tag_name",t),n.search=s.toString();const o=await fetch(n.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(!o.ok){_("invalid");return}const a=await o.json();a.status==="duplicate"&&parseInt(e.getAttribute("data-existing-id"))===parseInt(a.release_id)?_("valid"):(document.querySelector(".js-release-tag .js-edit-release-link").setAttribute("href",a.url),_(a.status)),le(e)}m(ae,"checkTag"),l("click",".js-generate-release-notes",function(e){const t=e.currentTarget;t.disabled||it(t)});async function it(e){L("loading"),e.disabled=!0;const r=`${e.getAttribute("data-repo-url")}/releases/notes`,n=new URL(r,window.location.origin),s=new URLSearchParams(n.search.slice(1));s.append("commitish",ce()),s.append("tag_name",B(document)||""),n.search=s.toString();const o=await fetch(n.toString(),{headers:{Accept:"application/json"}});if(o.ok){const a=await o.json();if(a.commitish===ce()){const i=document.getElementById("release_body"),c=ie()==="generated"?"":i.value.trim();c?i.value=c.concat(`

`,a.body):i.value=a.body;const d=document.getElementById("release_name");d.value||(d.value=a.title),L("succeed"),F(c?"generated-and-edited":"generated");const f=document.querySelector(".js-release-body-warning");f.textContent=a.warning_message,f.hidden=!a.warning_message}}else{L("failed"),e.disabled=!1;const a=await o.json();if(a&&a.error){const i=document.querySelector(".js-comment-form-error");i.textContent=a.error,i.hidden=!1}}}m(it,"generateNotes");const Ot=["pending","loading","succeed","failed"];function L(e){if(Ot.map(t=>{const r=document.getElementById(`generate-icon-${t}`);r&&(t===e?r.removeAttribute("hidden"):r.setAttribute("hidden","true"))}),e!=="failed"){const t=document.querySelector(".js-comment-form-error");t.textContent="",t.hidden=!0}}m(L,"setGeneratedNotesFetchState");function F(e){const t=document.getElementById("generated_notes_state");t.value=e}m(F,"setNotesTrackingState");function ie(){return document.getElementById("generated_notes_state").value}m(ie,"getNotesTrackingState");function ce(){var e;return oe()==="valid"?B(document)||"":((e=document.querySelector('input[name="release[target_commitish]"]:checked'))==null?void 0:e.value)||""}m(ce,"getCommitish"),h(".js-release-tag",m(function(t){ae(t)},"initialize"));function le(e){const r=e.closest("form").querySelector(".js-previewable-comment-form");if(!r)return;let n=r.getAttribute("data-base-preview-url");n||(n=String(r.getAttribute("data-preview-url")),r.setAttribute("data-base-preview-url",n));const s=e.querySelectorAll('input[name="release[tag_name]"], input[name="release[target_commitish]"]:checked'),o=new URL(n,window.location.origin),a=new URLSearchParams(o.search.slice(1));for(const i of s)i.value&&a.append(i.name,i.value);o.search=a.toString(),r.setAttribute("data-preview-url",o.toString())}m(le,"processChangedTag");function H(e=!1){const t=document.querySelector(".js-generate-release-notes");if(t){const r=oe(),n=r!=="valid"&&r!=="pending";t.disabled=e||n,t.ariaLabel=`${t.disabled?"Select a valid tag to a":"A"}utomatically add the markdown for all the merged pull requests from this diff and contributors of this release`}}m(H,"refreshGenerateNotesButton");function ue(e){if(e.value==="")H(),L("pending"),F("initial");else{const t=ie();H(t!=="initial"),t==="generated"&&F("generated-and-edited")}}m(ue,"processChangedBody"),l("click",".js-release-expand-btn",async function(e){const t=e.currentTarget.closest(".js-release-expandable"),r=t.getAttribute("data-expand-url"),n=await $(document,r);t==null||t.replaceWith(n)}),h("#release_body",function(e){const t=e;t.addEventListener("input",function(){ue(t)}),ue(t)}),l("change",".js-release-tag",function(e){ae(e.currentTarget)}),h(".js-release-form .js-previewable-comment-form",function(e){const t=e.closest("form").querySelector(".js-release-tag");le(t)});var Mt=Object.defineProperty,de=(e,t)=>Mt(e,"name",{value:t,configurable:!0});let W,fe;async function D(e){const t=document.querySelector(".js-release-stack").getAttribute("data-stack-url"),r=new URL(t,window.location.origin);let n;switch(M({target_found:!0,template_found:!0,loading:!0},"tag"),e.id){case"tag-list":{const s=e.querySelector('input[name="release[tag_name]"]:checked');if(!s)return;n=await O(r,"ref",s),!n.target_found&&!!W&&(n=await O(r,fe,W)),M(n,"tag");break}case"filter-list-branches":{const s=e.querySelector('input[name="release[target_commitish]"]:checked');if(!s)return;W=s,fe="ref",n=await O(r,"ref",s),M(n,"branch");break}case"filter-list-tags":{const s=e.querySelector('input[name="release[target_commitish]"]:checked');if(!s)return;W=s,fe="oid",n=await O(r,"oid",s),M(n,"commit");break}}}de(D,"validateStack");const pe=new WeakMap;async function O(e,t,r){if(pe.has(r))return pe.get(r);const n=new URLSearchParams(e.search.slice(1));n.append(t,r.value),e.search=n.toString();const s=await fetch(e.toString(),{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});let o={target_found:!1};return s.ok&&(o=await s.json(),o.target_found=!0),pe.set(r,o),o}de(O,"getStackStatus");const Rt={branding:"Icon and color found in stack template.",template:"Contains all the required information.",readme:"File exists."};function M(e,t){if(!e.target_found)return;const r=document.querySelector(".js-releases-marketplace-banner-container"),n=document.querySelector(".js-releases-marketplace-publish-heading"),s=document.querySelector(".js-publish-release");let o=!1;if(s.disabled=n.hidden=r.hidden=!e.template_found,!e.template_found)return;const a=["branding","template","readme"];for(const i of a){let c;e.loading?c="loading":c=e[i]?"failure":"success",c==="failure"&&(o=!0);const d=r.querySelector(`#${i}-row`);for(const p of d.querySelectorAll(".status-icon"))p.hidden=p.getAttribute("data-state")!==c;const f=d.querySelector(".js-status-text");for(const p of["color-fg-attention","color-fg-danger","color-fg-muted"])f.classList.remove(p);switch(c){case"success":f.textContent=Rt[i],f.classList.add("color-fg-muted");break;case"failure":f.textContent=e[i],f.classList.add("color-fg-danger");break;case"loading":f.textContent="Loading...",f.classList.add("color-fg-attention")}for(const p of d.querySelectorAll(".js-modify-button")){const A=`${i}_path`;p.setAttribute("href",e[A]),t==="branch"&&c!=="loading"?p.hidden=p.getAttribute("data-state")!==c:p.hidden=!0}}s.disabled=o}de(M,"updateStackChecks"),l("change",".js-release-stack #filter-list-branches",e=>D(e.currentTarget)),l("change",".js-release-stack #filter-list-tags",e=>D(e.currentTarget)),l("change",".js-release-stack #tag-list",e=>D(e.currentTarget)),h(".js-release-stack #filter-list-branches",function(e){D(e)});var Nt=Object.defineProperty,$t=(e,t)=>Nt(e,"name",{value:t,configurable:!0});const ct="<BRANCH>";function lt(e){const t=e.closest(".js-rename-branch-form");let r=e.value;const n=r!==e.defaultValue&&r!=="",s=t.querySelector(".js-rename-branch-autocheck-message");if(s&&n){let o=!1;r=s.getAttribute("data-shell-safe-name")||ct,r.includes("<")&&(o=!0);for(const i of t.querySelectorAll(".js-rename-branch-new-name"))i.textContent=r;r=s.getAttribute("data-shell-safe-name-with-remote")||`origin/${ct}`,r.includes("<")&&(o=!0);for(const i of t.querySelectorAll(".js-rename-branch-new-name-with-remote"))i.textContent=r;const a=t.querySelector(".js-rename-branch-special-characters-documentation");a&&o&&(a.hidden=!1,a.removeAttribute("aria-hidden"))}}$t(lt,"updateRenameInstructions"),l("auto-check-message-updated",".js-rename-branch-input",function(e){const t=e.currentTarget;lt(t)});var Ut=Object.defineProperty,Bt=(e,t)=>Ut(e,"name",{value:t,configurable:!0});const ut=Bt(e=>{const t=document.querySelector(dt);if(t){const r=e.value.length===0;t.disabled=r}},"toggleSubmit"),dt='form.js-protected-branch-settings button[type="submit"]';h(dt,{add(){const e=document.getElementById("rule_field");e&&(ut(e),e.addEventListener("input",()=>ut(e)))}}),l("change",".js-template-repository-choice",function(e){const t=e.target,r=t.checked&&t.value!=="",n=t.form;n.querySelector(".js-repository-auto-init-options").classList.toggle("has-removed-contents",r);const o=n.querySelectorAll(".js-template-repository-setting"),a=n.querySelectorAll(".js-template-repository-name-display");if(r){const c=t.closest(".js-template-repository-choice-container").querySelector(".js-template-repository-name"),d=t.getAttribute("data-owner"),f=n.querySelector(`.js-repository-owner-choice[value="${d}"]`);if(f instanceof HTMLInputElement)f.checked=!0,j(f,"change");else{const p=n.querySelector(".js-repository-owner-choice.js-repository-owner-is-viewer");p.checked=!0,j(p,"change")}for(const p of a)p.textContent=c.textContent}else for(const i of a)i.textContent="";for(const i of o)i.hidden=!r});const me=Re(Ne);De("keydown",".js-tree-finder-field",e=>{e.key==="Escape"&&(e.preventDefault(),history.back())}),h(".js-tree-finder",e=>{const t=e.querySelector(".js-tree-finder-field"),r=e.querySelector(".js-tree-finder-virtual-filter"),n=e.querySelector(".js-tree-browser"),s=e.querySelector(".js-tree-browser-results"),o=e.querySelector(".js-tree-browser-result-template"),a=new Ce(t,s);r.filter=(i,c)=>c===""||Oe(c,i)&&me(c,i)>0,r.addEventListener("virtual-filter-input-filter",()=>{n.updating="lazy"}),r.addEventListener("virtual-filter-input-filtered",()=>{n.updating="eager"}),n.addEventListener("virtual-list-sort",i=>{i.preventDefault();const c=t.value;n.sort((d,f)=>me(c,f)-me(c,d))}),n.addEventListener("virtual-list-update",()=>{a.stop()}),n.addEventListener("virtual-list-updated",()=>{a.start(),a.navigate()}),n.addEventListener("virtual-list-render-item",i=>{if(!(i instanceof CustomEvent))return;const c=new Ae(o,{item:i.detail.item,id:`entry-${Math.random().toString().substr(2,5)}`}),d=c.querySelector("marked-text");d&&(d.positions=Me),i.detail.fragment.append(c)}),n.querySelector("ul").hidden=!1,t.focus(),a.start()});var Ft=Object.defineProperty,C=(e,t)=>Ft(e,"name",{value:t,configurable:!0});let R=null;const he=new WeakMap;function ft(e,t){const n=e.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress");n.hidden=!1,e.classList.add("is-progress-bar");const s=n.querySelector(".js-upload-meter-text"),o=s.querySelector(".js-upload-meter-range-start");o.textContent=String(t.uploaded()+1);const a=s.querySelector(".js-upload-meter-range-end");a.textContent=String(t.size)}C(ft,"showProgress");function ge(e){e.classList.remove("is-progress-bar");const t=e.closest(".js-upload-manifest-file-container"),r=t.querySelector(".js-upload-progress");r.hidden=!0;const n=t.querySelector(".js-upload-meter-text .js-upload-meter-filename");n.textContent=""}C(ge,"hideProgress"),l("file-attachment-accept",".js-upload-manifest-file",function(e){const{attachments:t}=e.detail,r=parseInt(e.currentTarget.getAttribute("data-directory-upload-max-files")||"",10);t.length>r&&(e.preventDefault(),e.currentTarget.classList.add("is-too-many"))}),l("document:drop",".js-upload-manifest-tree-view",async function(e){const{transfer:t}=e.detail,r=e.currentTarget,n=await Ie.traverse(t,!0),s=document.querySelector("#js-repo-pjax-container");s.addEventListener("pjax:success",()=>{s.querySelector(".js-upload-manifest-file").attach(n)},{once:!0});const o=r.getAttribute("data-drop-url");$e({url:o,container:s})}),l("upload:setup",".js-upload-manifest-file",async function(e){const{batch:t,form:r,preprocess:n}=e.detail,s=e.currentTarget;ft(s,t);function o(){r.append("upload_manifest_id",he.get(s))}if(C(o,"addInfo"),he.get(s)){o();return}if(R){n.push(R.then(o));return}const i=s.closest(".js-upload-manifest-file-container").querySelector(".js-upload-manifest-form");R=fetch(i.action,{method:i.method,body:new FormData(i),headers:{Accept:"application/json"}});const[c,d]=pt();n.push(c.then(o));const f=await R;if(!f.ok)return;const p=await f.json(),b=document.querySelector(".js-manifest-commit-form").elements.namedItem("manifest_id");b.value=p.upload_manifest.id,he.set(s,p.upload_manifest.id),R=null,d()});function pt(){let e;return[new Promise(r=>{e=r}),e]}C(pt,"makeDeferred"),l("upload:start",".js-upload-manifest-file",function(e){const{attachment:t,batch:r}=e.detail,o=e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-progress").querySelector(".js-upload-meter-text"),a=o.querySelector(".js-upload-meter-range-start");a.textContent=r.uploaded()+1;const i=o.querySelector(".js-upload-meter-filename");i.textContent=t.fullPath}),l("upload:complete",".js-upload-manifest-file",function(e){const{attachment:t,batch:r}=e.detail,s=document.querySelector(".js-manifest-commit-file-template").querySelector(".js-manifest-file-entry").cloneNode(!0),o=s.querySelector(".js-filename");o.textContent=t.fullPath;const a=t.id,c=s.querySelector(".js-remove-manifest-file-form").elements.namedItem("file_id");c.value=a;const d=document.querySelector(".js-manifest-file-list");d.hidden=!1,e.currentTarget.classList.add("is-file-list"),d.querySelector(".js-manifest-file-list-root").appendChild(s),r.isFinished()&&ge(e.currentTarget)}),l("upload:progress",".js-upload-manifest-file",function(e){const{batch:t}=e.detail,n=e.currentTarget.closest(".js-upload-manifest-file-container").querySelector(".js-upload-meter");n.style.width=`${t.percent()}%`});function ye(e){ge(e.currentTarget)}C(ye,"onerror"),l("upload:error",".js-upload-manifest-file",ye),l("upload:invalid",".js-upload-manifest-file",ye),Q(".js-remove-manifest-file-form",async function(e,t){await t.html();const r=e.closest(".js-manifest-file-list-root");if(e.closest(".js-manifest-file-entry").remove(),!r.hasChildNodes()){const s=r.closest(".js-manifest-file-list");s.hidden=!0,document.querySelector(".js-upload-manifest-file").classList.remove("is-file-list")}});async function mt(e){const t=e.getAttribute("data-redirect-url");try{await Ue(e.getAttribute("data-poll-url")),window.location.href=t}catch{document.querySelector(".js-manifest-ready-check").hidden=!0,document.querySelector(".js-manifest-ready-check-failed").hidden=!1}}C(mt,"manifestReadyCheck"),h(".js-manifest-ready-check",{initialize(e){mt(e)}});var Ht=Object.defineProperty,ht=(e,t)=>Ht(e,"name",{value:t,configurable:!0});l("click",".js-release-remove-file",function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.add("delete"),t.querySelector("input.destroy").value="true"}),l("click",".js-release-undo-remove-file",function(e){const t=e.currentTarget.closest(".js-release-file");t.classList.remove("delete"),t.querySelector("input.destroy").value=""});function je(e){return e.closest("form").querySelector("#release_id").value}ht(je,"getReleaseId");let z=null;l("release:saved",".js-release-form",function(e){const t=e.currentTarget;z=null;let r=!1;for(const s of t.querySelectorAll(".js-releases-field .js-release-file"))s.classList.contains("delete")?s.remove():s.classList.contains("js-template")||(r=!0);const n=t.querySelector(".js-releases-field");n.classList.toggle("not-populated",!r),n.classList.toggle("is-populated",r)});function Se(e,t){t.append("release_id",je(e));const r=Array.from(document.querySelectorAll(".js-releases-field .js-release-file.delete .id"));if(r.length){const n=r.map(s=>s.value);t.append("deletion_candidates",n.join(","))}}ht(Se,"addInfo"),l("upload:setup",".js-upload-release-file",function(e){const{form:t,preprocess:r}=e.detail,n=e.currentTarget;if(je(n)){Se(n,t);return}if(!z){const o=document.querySelector(".js-save-draft");z=ne(o)}const s=Se.bind(null,n,t);r.push(z.then(s))}),l("upload:start",".js-upload-release-file",function(e){const t=e.detail.policy;e.currentTarget.querySelector(".js-upload-meter").classList.remove("d-none");const n=t.asset.replaced_asset;if(!!n)for(const s of document.querySelectorAll(".js-releases-field .js-release-file .id"))Number(s.value)===n&&s.closest(".js-release-file").remove()}),l("upload:complete",".js-upload-release-file",function(e){var t;const{attachment:r}=e.detail,n=document.querySelector(".js-releases-field"),s=n.querySelector(".js-template").cloneNode(!0);s.classList.remove("d-none","js-template"),s.querySelector("input.id").value=r.id;const o=r.name||r.href.split("/").pop();for(const c of n.querySelectorAll(".js-release-file"))((t=c.querySelector(".js-release-asset-filename"))==null?void 0:t.value)===o&&c.getAttribute("data-state")==="starter"&&c.remove();for(const c of s.querySelectorAll(".js-release-asset-filename"))c instanceof HTMLInputElement?c.value=o:c.textContent=o;const a=`(${(r.file.size/(1024*1024)).toFixed(2)} MB)`;s.querySelector(".js-release-asset-filesize").textContent=a,s.setAttribute("data-state","uploaded"),n.appendChild(s),n.classList.remove("not-populated"),n.classList.add("is-populated"),e.currentTarget.querySelector(".js-upload-meter").classList.add("d-none")}),l("upload:progress",".js-upload-release-file",function(e){const{attachment:t}=e.detail,r=e.currentTarget.querySelector(".js-upload-meter");r.style.width=`${t.percent}%`});var gt=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,zt=(e,t)=>gt(e,"name",{value:t,configurable:!0}),yt=(e,t,r,n)=>{for(var s=n>1?void 0:n?Wt(t,r):t,o=e.length-1,a;o>=0;o--)(a=e[o])&&(s=(n?a(t,r,s):a(s))||s);return n&&s&&gt(t,r,s),s};let G=class extends HTMLElement{constructor(){super(...arguments);this.count=0}connectedCallback(){h("get-repo",{constructor:Be,add:e=>{this.handleGetRepoElement(e)}})}handleGetRepoElement(e){!e.openOrCreateInCodespace||(this.count===0?e.showOpenOrCreateInCodespace():e.removeOpenOrCreateInCodespace())}};zt(G,"RepoCodespacesCountElement"),yt([Te],G.prototype,"count",2),G=yt([N],G)}}});
//# sourceMappingURL=repositories-ec1b69d5.js.map
